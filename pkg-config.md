# Что такое pkg-config

Утилита pkg-config относится к классу helper-ов в операционных системах Linux. Она помогает настроить параметры компиляции приложений на С++ в части указания пути к заголовочным файлам и библиотекам.

Типовой пример: в системе установлены заголовочные файлы и библиотеки GTK+ версии 4. Они были установлены посредством apt-get и в какие-то подкаталоги. Мы бы могли найти эти подкаталоги на конкретной машине и сформировать наборы параметров `-I` и `-l`, но это было бы не переносимо и заняло бы много времени.

Вместо этого мы можем выполнить следующие команды:

```shell
pkg-config --modversion gtk4
pkg-config --cflags gtk4
pkg-config --libs gtk4
```

Которые вернут нам версию конкретной библиотеки, путь к заголовочным файлам и путь к линкуемым библиотекам.

Вот как может выглядеть строка компиляции простого приложения с использованием pkg-config:

```shell
gcc $( pkg-config --cflags gtk4 ) -o example-0 example-0.c $( pkg-config --libs gtk4 )
```

Ключевыми являются макросы `$( pkg-config --cflags gtk4 )` и `$( pkg-config --libs gtk4 )`, которые добавят необходимые нам ключи компиляции и линковки.

В общем случае, нам нужно знать, как правильно называется пакет с библиотеками, которые мы собираемся использовать. Именно это может быть некоторой проблемой. Например, в каких-то случаях, GTK+ может быть установлен через пакет с именем `gtk+-3.0`, а в каких-то как `gtk4`. Чтобы посмотреть все известные утилите пакеты, следует использовать команду `pkg-config --list-all`

Как pkg-config находит ссылки на библитеки? Он использует .pc-файлы, которые библиотеки размещают в стандарном расположении при своей установке из пакетных баз. Однако некоторые библиотеки могут использовать не стандартное расположение .pc-файлов, например: `/opt/openssl/lib/pkgconfig/openssl.pc`

Чтобы pkg-config "видел" .pc-файлы в нестандартных расположениях, необходимо либо создать символическую ссылку в стандартном расположении, либо установить/изменить переменную окружения `PKG_CONFIG_PATH`.

Также стоит обратить внимание, что pkg_config часто используется совместно с утилитой GNU autoconf. Для изучения autoconf рекомендуется книга Джона Калькоте (John Calcote) Autotools, второе издание (No Starch Press, 2019).
